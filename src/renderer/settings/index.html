<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';">
  <title>Claude's Party - Settings</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="settings-container">
    <header class="header">
      <h1>Settings</h1>
      <p class="subtitle">Configure Claude's Party</p>
    </header>

    <main class="settings-content">
      <!-- ElevenLabs Section -->
      <section class="settings-section">
        <h2>Voice (ElevenLabs)</h2>
        <p class="section-desc">Enable voice input and output using ElevenLabs</p>

        <div class="form-group">
          <label for="elevenlabs-api-key">API Key</label>
          <input type="password" id="elevenlabs-api-key" placeholder="Enter your ElevenLabs API key">
          <span class="hint">Get your API key from <a href="#" id="elevenlabs-link">elevenlabs.io</a></span>
        </div>

        <div class="form-group">
          <label for="elevenlabs-voice-id">Voice ID</label>
          <input type="text" id="elevenlabs-voice-id" placeholder="EXAVITQu4vr4xnSDxMaL">
          <span class="hint">Default: Rachel (EXAVITQu4vr4xnSDxMaL)</span>
        </div>

        <div class="form-row">
          <div class="toggle-group">
            <label class="toggle">
              <input type="checkbox" id="voice-input-enabled">
              <span class="toggle-slider"></span>
            </label>
            <span>Enable Voice Input</span>
          </div>

          <div class="toggle-group">
            <label class="toggle">
              <input type="checkbox" id="voice-output-enabled">
              <span class="toggle-slider"></span>
            </label>
            <span>Enable Voice Output</span>
          </div>
        </div>
      </section>

      <!-- Twilio Section -->
      <section class="settings-section">
        <h2>SMS (Twilio)</h2>
        <p class="section-desc">Receive SMS notifications and respond via text</p>

        <div class="form-group">
          <label for="twilio-account-sid">Account SID</label>
          <input type="text" id="twilio-account-sid" placeholder="ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
        </div>

        <div class="form-group">
          <label for="twilio-auth-token">Auth Token</label>
          <input type="password" id="twilio-auth-token" placeholder="Enter your Twilio auth token">
        </div>

        <div class="form-group">
          <label for="twilio-phone-number">Twilio Phone Number</label>
          <input type="tel" id="twilio-phone-number" placeholder="+1234567890">
          <span class="hint">Your Twilio phone number (with country code)</span>
        </div>

        <div class="form-group">
          <label for="user-phone-number">Your Phone Number</label>
          <input type="tel" id="user-phone-number" placeholder="+1234567890">
          <span class="hint">Where to send SMS notifications</span>
        </div>

        <div class="toggle-group">
          <label class="toggle">
            <input type="checkbox" id="sms-notifications-enabled">
            <span class="toggle-slider"></span>
          </label>
          <span>Enable SMS Notifications</span>
        </div>
      </section>

      <!-- Notifications Section -->
      <section class="settings-section">
        <h2>Desktop Notifications</h2>
        <p class="section-desc">Configure when to show desktop notifications</p>

        <div class="toggle-group">
          <label class="toggle">
            <input type="checkbox" id="desktop-notifications-enabled">
            <span class="toggle-slider"></span>
          </label>
          <span>Enable Desktop Notifications</span>
        </div>

        <div class="toggle-group">
          <label class="toggle">
            <input type="checkbox" id="notify-on-session-end">
            <span class="toggle-slider"></span>
          </label>
          <span>Notify when session ends</span>
        </div>

        <div class="toggle-group">
          <label class="toggle">
            <input type="checkbox" id="notify-on-error">
            <span class="toggle-slider"></span>
          </label>
          <span>Notify on errors</span>
        </div>

        <div class="toggle-group">
          <label class="toggle">
            <input type="checkbox" id="notify-on-waiting">
            <span class="toggle-slider"></span>
          </label>
          <span>Notify when waiting for input</span>
        </div>
      </section>

      <!-- UI Section -->
      <section class="settings-section">
        <h2>Appearance</h2>
        <p class="section-desc">Customize the status popover</p>

        <div class="form-group">
          <label for="popover-position">Popover Position</label>
          <select id="popover-position">
            <option value="top-right">Top Right</option>
            <option value="top-left">Top Left</option>
            <option value="bottom-right">Bottom Right</option>
            <option value="bottom-left">Bottom Left</option>
          </select>
        </div>

        <div class="form-group">
          <label for="popover-opacity">Opacity: <span id="opacity-value">95%</span></label>
          <input type="range" id="popover-opacity" min="50" max="100" value="95">
        </div>

        <div class="toggle-group">
          <label class="toggle">
            <input type="checkbox" id="always-on-top">
            <span class="toggle-slider"></span>
          </label>
          <span>Always on Top</span>
        </div>
      </section>

      <!-- Hook Server Section -->
      <section class="settings-section">
        <h2>Hook Server</h2>
        <p class="section-desc">Configure the hook listener for Claude Code</p>

        <div class="form-group">
          <label for="hook-server-port">Port</label>
          <input type="number" id="hook-server-port" min="1024" max="65535" value="31548">
          <span class="hint">HTTP server port for receiving hook events</span>
        </div>

        <div class="info-box">
          <h4>Setup Instructions</h4>
          <p>Add hooks to your Claude Code settings to send events to this app:</p>
          <code id="hook-config">
{
  "hooks": {
    "PreToolUse": ["curl -X POST http://127.0.0.1:31548/PreToolUse -d @-"],
    "PostToolUse": ["curl -X POST http://127.0.0.1:31548/PostToolUse -d @-"],
    "Notification": ["curl -X POST http://127.0.0.1:31548/Notification -d @-"],
    "Stop": ["curl -X POST http://127.0.0.1:31548/Stop -d @-"]
  }
}
          </code>
          <button id="copy-hook-config" class="btn btn-secondary">Copy Configuration</button>
        </div>
      </section>
    </main>

    <footer class="footer">
      <button id="save-btn" class="btn btn-primary">Save Settings</button>
      <button id="reset-btn" class="btn btn-secondary">Reset to Defaults</button>
    </footer>
  </div>

  <div id="toast" class="toast hidden"></div>

  <script src="renderer.js"></script>
</body>
</html>
